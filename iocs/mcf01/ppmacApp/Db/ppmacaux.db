# SYSP:	phsical PV system name
# DEVP:	phsical PV device name
# SYSV: virtual PV system name
# DEVV: virtual PV device name
# PORT: asyn port name to the PMAC (for instance PMAC_S0)
# AXIS: PMAC axis number to request the status word for

record(ai, "$(SYSP)$(DEVP)Cur-I") {
  field(DESC, "actual motor current readback")
  field(PINI, "1")
  field(DTYP, "stream")
  #field(INP, "@pmac.proto getCurrent_RDB(M$(AXIS)76) $(PORT)")
  field(INP, "@pmac.proto getCurrent_RDB(Motor[$(AXIS)].IdMeas) $(PORT)")
  field(PREC, "1")
  field(EGU, "mA")
  field(LOPR,"0.1")
  field(HOPR,"2.00")
  field(SCAN, "1 second")
}

# Scan rate for pmac status, plc querying, cpu load querying
record(scalcout, "$(SYSV)$(DEVV)Cnt:Ax-SP-SCalcout_") {
  field(DESC, "get pmac status")
  field(SCAN, ".5 second")
  # field(FLNK, "$(SYSV)$(DEVV)Cnt:Ax-SP")
  field(CALC, "A")
  field(INPA, "$(AXIS)")
  field(OUT, "$(SYSV)$(DEVV)Cnt:Ax-SP.VAL PP")
  field(OOPT, "Every Time")
  field(DOPT, "Use CALC")
}
